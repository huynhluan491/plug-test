<div class="ct-wally theme-dark main-panel-wrapper flex-column overflow-hidden" cdkDragBoundary="html" cdkDrag
     [class.d-none]="!isShowed"
     [class.d-flex]="isShowed"
     [class.maximize]="isMaximized"
     style="transform: translate3d({{left}}, {{top}}, 0px);"
     [style.width]="width"
     [style.height]="height"
>
  <div class="header-panel d-flex flex-gap-2 px-2 align-items-center" cdkDragHandle>
    <button
      class="action-btn"
      [matMenuTriggerFor]="radioAction"
      mat-icon-button
      (click)="
        radioActionMenuBtn.menuOpened.closed = !radioActionMenuBtn.menuOpened.closed;
      "
      #radioActionMenuBtn="matMenuTrigger"
      [ngClass]="{'action-active': radioActionMenuBtn.menuOpened.closed}"
    >
      <i class="fa-light fa-list-radio font-size-18px pb-1"></i>
    </button>
    <mat-menu
      #radioAction="matMenu"
      (closed)="radioActionMenuBtn.menuOpened.closed = !radioActionMenuBtn.menuOpened.closed"
    >
      <button class="radio-option"
              *ngFor="let item of radioActionList" mat-menu-item
              [ngClass]="{'radio-active': selectedRadioAction === item.id}"
              (click)="selectedRadioAction = item.id"
      >
        <span class="option-text d-flex flex-wrap flex-gap-4px align-items-center">
          <div class="font-weight-bold font-size-14px">{{ item.mainTitle }}</div>
          <p class="grey-text font-size-14px">{{ item.subTitle }}</p>
        </span>
      </button>
    </mat-menu>
    <div class="text-truncate font-size-18px"><b>Cooling Tower</b> of Hoskote Plant</div>
    <div class="flex-grow-1"></div>
    <div class="d-flex align-items-center">
      <button class="action-btn" mat-icon-button matTooltip="Settings"
              [matMenuTriggerFor]="gearAction"
              #gearMenuBtn="matMenuTrigger"
              [ngClass]="{'action-active': gearMenuBtn.menuOpened.closed}"
              (click)="
        gearMenuBtn.menuOpened.closed = !gearMenuBtn.menuOpened.closed;
      "
      >
        <i class="fal fa-gear font-size-18px"></i>
      </button>
      <mat-menu #gearAction="matMenu"
                xPosition="before"
                (closed)="gearMenuBtn.menuOpened.closed = !gearMenuBtn.menuOpened.closed"
      >
        <button
          class="action-btn" mat-menu-item
          *ngFor="let gear of gearActionList"
          [ngClass]="{'gear-active': gear?.id === selectedGearSetting}"
          (click)="selectedGearSetting = gear.id"
        >
          <div class="d-flex flex-gap-2 align-items-center">
            <div><i [class]="gear?.iconClassName"></i></div>
            <div class="font-size-14px">{{ gear.title }}</div>
          </div>
        </button>
      </mat-menu>
      <button class="action-btn" mat-icon-button matTooltip="Maximize" (click)="setMax()" *ngIf="!isMaximized">
        <i class="fal fa-expand font-size-18px"></i>
      </button>
      <button mat-icon-button matTooltip="Minimize" (click)="setMin()" *ngIf="isMaximized">
        <i class="fal fa-compress font-size-18px"></i>
      </button>
      <button mat-icon-button matTooltip="Close" (click)="hide()">
        <i class="fal fa-xmark font-size-18px"></i>
      </button>
    </div>
  </div>
  <div class="flex-grow-1 content-panel">
    <app-message-box [data]="collection?.conversations || []" *ngIf="collection"></app-message-box>
  </div>
  <div class="footer-panel">
    <app-footer [isDisabled]="collection === null" [data]="collection" [isHistoryOpened]="isHistoryOpened"
                (_toggleHistory)="toggleHistory($event)"></app-footer>
  </div>
  <app-conversation-history></app-conversation-history>
</div>
